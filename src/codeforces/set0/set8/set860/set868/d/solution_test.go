package main

import (
	"bufio"
	"strings"
	"testing"
)

func runSample(t *testing.T, s string, expect []int) {
	reader := bufio.NewReader(strings.NewReader(s))
	res := process(reader)

	for i, expect := range expect {
		if res[i] != expect {
			t.Errorf("Sample expect %v, but got %v", expect, res[i])
		}
	}
}

func TestSample1(t *testing.T) {
	runSample(t, `5
01
10
101
11111
0
3
1 2
6 5
4 4
	`, []int{1, 2, 0})
}

func TestSample2(t *testing.T) {
	runSample(t, `2
1
0
16
1 1
1 3
1 3
4 3
1 6
7 5
4 6
8 6
10 6
5 11
8 1
5 9
11 14
9 1
2 10
10 17
	`, []int{0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		0,
		1,
		1,
	})
}

func TestSample3(t *testing.T) {
	runSample(t, `5
111101000111100011100110000100
000111001
01101000
0000110100100010011001000000010100100111110110
0110001
10
5 5
2 2
5 6
1 1
1 7
10 6
6 2
11 1
3 6
8 2
	`, []int{2,
		2,
		2,
		3,
		3,
		4,
		3,
		4,
		2,
		3,
	})
}

func TestSample4(t *testing.T) {
	runSample(t, `5
11
0100100001011011111010001011
0010001101011000
100111111001000010
001101110111111100100010100111111100
1
3 5
	`, []int{5})
}

func TestSample5(t *testing.T) {
	runSample(t, `10
1101000010
1101000010
1101000010
1101000010
1101000010
1101000010
1101000010
1101000010
1101000010
1101000010
8
10 10
11 11
12 12
13 13
14 14
15 15
16 16
17 17
	`, []int{2,
		2,
		2,
		2,
		2,
		2,
		2,
		2})
}

func TestSample6(t *testing.T) {
	runSample(t, `2
011
100
63
1 1
3 3
4 4
5 5
6 6
7 7
8 8
9 9
10 10
11 11
12 12
13 13
14 14
15 15
16 16
17 17
18 18
19 19
20 20
21 21
22 22
23 23
24 24
25 25
26 26
27 27
28 28
29 29
30 30
31 31
32 32
2 2
34 34
35 35
36 36
37 37
38 38
39 39
40 40
41 41
42 42
43 43
44 44
45 45
46 46
47 47
48 48
49 49
50 50
51 51
52 52
53 53
54 54
55 55
56 56
57 57
58 58
59 59
60 60
61 61
62 62
63 63
33 64
	`, []int{1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		1,
		2})
}
